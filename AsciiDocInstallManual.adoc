//////////////////////////////////////////////////////////////////////
// Attribute
//////////////////////////////////////////////////////////////////////

//日本語ドキュメント
:lang: ja
//文書タイプはbookにする
:doctype: book
//目次を自動生成する
:toc: left
//対象とする階層数を指定する
:toclevels: 3
//タイトルを変更する
:toc-title: 目次
//章見出し番号を出力する
:sectnums:
//PDF化時の章見出しのChapter.が表示されないようにする
:chapter-label:
//シンタックスハイライトを使用する
:source-highlighter: coderay
//アイコンフォントを利用するフラグ
:icons: font
//マクロを使用する（ショートカットキーとか）
:experimental:
//画像をdata-uriとして埋め込む
:data-uri:
//イメージファイルを置くフォルダ
:imagesdir: ./images
//PDF化時のフォントファイルを置くフォルダ
:pdf-fontsdir: ./fonts
//PDF化時のスタイルファイルを指定
:pdf-style: ./style/public_style.yml
//HTML化時のスタイルファイルを置くフォルダ
:stylesdir: ./style
//HTML化時のスタイルファイルを指定
:stylesheet: asciidoctor-default.css



//////////////////////////////////////////////////////////////////////
// ここから本文
//////////////////////////////////////////////////////////////////////

//ヘッダーに入るドキュメント名
= AsciiDoc環境構築手順


== 配布パッケージについて
.中身は以下の通り
----
|-AsciiDocInstallManual.pdf    // 手順書
|-tool                     　　// インストールツール一式
   |-①chocolateyをインストール.bat
   |-②chocolateyのリポジトリから各種パッケージをインストール.bat
   |-③asciidoc関連ツールをインストール.bat
   |-④VScodeの拡張機能をインストール.bat
|-template                    // このフォルダ一式が文章のテンプレートとなる
   |-dist                  　　　    // HTMLやPDFの出力先
   |-fonts                 　　　    // フォントファイルを格納
   |-images                　　      // イメージファイルを格納
   |-style                 　　    　// スタイルファイルを格納
   |-make_html_test.bat    　　 　 　// AsciiDoc→HTML変換用スクリプト
   |-make_pdf_test.bat              // AsciiDoc→PDF変換用スクリプト
   |-test.adoc                      // AsciiDocドキュメントのテストサンプル
----


== 作業全体の流れ
① Chocolateyをインストール +
② Chocolateyのリポジトリから各種パッケージをインストール +
③ AsciiDoc関連ツールをインストール +
④ VScodeの拡張機能をインストール +
⑤ 実際にAsciiDocを書いてみる +


=== 手順①
.*以下のバッチファイルをダブルクリックで実行します*
 ①chocolateyをインストール.bat

* ユーザーアカウント制御の許可のポップアップが出るので `はい` をクリック +
* コマンドプロンプトが表示されて処理が進むので自動的に閉じるまで待つ +


=== 手順②
.*以下のバッチファイルをダブルクリックで実行します*
 ②chocolateyのリポジトリから各種パッケージをインストール.bat

* ユーザーアカウント制御の許可のポップアップが出るので `はい` をクリック
* コマンドプロンプトが表示されて処理が進むのでしばらく待つ
* 下記画面が表示されたら `ライセンスに同意します` にチェックを入れて `次へ` をクリック +
  image:Sourcetree02.png[width="300",align="left"]
* `Atlassianアカウント` を選択して `次へ` をクリック +
  image:Sourcetree03.png[width="300",align="left"]
* `Enter email` の枠にメールアドレスを入力して `Continue` をクリック +
  image:Sourcetree04.png[width="200",align="left"]
* 続けて、 `Enter full name` にニックネーム、 `Create password` にパスワードを求められるので入力して、 `Sign up` をクリック（※既にAtlassianアカウントを持っている場合は `Sign up for an account` で実施） +
  image:Sourcetree05.png[width="200",align="left"]
* 「私はロボットではありません」画像選択を実施して、 `確認` をクリック +
  image:Sourcetree06.png[width="200",align="left"]
* 画像選択に成功すれば、登録完了画面に遷移するので、 `次へ` をクリック +
  image:Sourcetree07.png[width="300",align="left"]
* ツールのインストール画面に遷移するので、`Git` のみ選択して `次へ` をクリック +
  image:Sourcetree08.png[width="300",align="left"]
* `SSHキーを読み込みますか？` が表示されたら `いいえ` をクリック +
  image:Sourcetree09.png[width="300",align="left"]
* Sourcetreeが自動的に立ち上がったのが確認できたらアプリを閉じる +
  image:Sourcetree10.png[width="300",align="left"]
* コマンドプロンプトの画面にて、Atlassianアカウントを作成完了したか聞かれるので、 +
完了していたら `y` 、完了していなければ `n` を入力して kbd:[Enter] を押す +
[.underline]#`y` の場合# ： コマンドプロンプトが表示されて処理が進むので自動的に閉じるまで待つ +
[.underline]#`n` の場合# ： 再度、kbd:[Enter] を押すとコマンドプロンプトが閉じる +


=== 手順③
.*以下のバッチファイルをダブルクリックで実行します*
 *③asciidoc関連ツールをインストール.bat

* コマンドプロンプトが表示されて処理が進むので自動的に閉じるまで待つ


=== 手順④
.*以下のバッチファイルをダブルクリックで実行します*
 ④VScodeの拡張機能をインストール.bat

* コマンドプロンプトが表示されて処理が進むので自動的に閉じるまで待つ


=== 手順⑤
一から書くとなると大変なので... 今回はテストサンプルを用意しています +
また、プレビューやHTML/PDFへの変換のために必要なスタイルファイル等も用意しています +

ここでは、環境構築が正しくできたことを確認するための最低限の説明にとどめますので、 +
あとはご自身でググってテキストベース仕様書ライフを堪能しましょう！（どっかのサイトの受け売り） +

[NOTE]
====
文法リファレンス（日本語サイト） +
https://takumon.github.io/asciidoc-syntax-quick-reference-japanese-translation/
====

.*templateフォルダをコピー*
このフォルダ一式が文章のテンプレートとなるので、必要に応じてコピーして文章作成に使ってください +

.*VScode を起動*
AsciiDocで書くためのテキストエディタとして使用します +
Windowsのスタートメニューから `Visual Studio Code` （以下、VScodeとする）を検索して起動します +

.*テストサンプルを開く*
[ファイル]→[ファイルを開く]から `template` フォルダ内の `test.adoc` ファイルを開きます +

.*asciidoctorの設定を変更*
VScode上でプレビュー表示を行うための設定を行います +
[ファイル]→[基本設定]→[設定]から `asciidoctor` を検索し、以下の設定を行います
----
asciidoctor_command : asciidoctor -n -r asciidoctor-diagram -o-
asciidoctorpdf_command : asciidoctor-pdf -n -r asciidoctor-diagram -r asciidoctor-pdf-cjk -o-
use_asciidoctor_js  : false(チェックを外す)
----

image::VScodeSetting.png[]

.*プレビューを行う*
ショートカット kbd:[Ctrl+K] → kbd:[V] で画面右側にプレビューが表示されます +
参考までにテストサンプルのプレビュー結果を以下に示します +

image::TestPreviewResult.png[]

.*HTMLやPDFに変換する*
以下のバッチファイルを実行するとHTMLに変換されます +
（`dist` フォルダに `test.html` が作成される） +

 make_html_test.bat

以下のバッチファイルを実行するとPDFに変換されます +
（`dist` フォルダに `test.pdf` が作成される） +

 make_pdf_test.bat




*以上で終わりです！*


